# Scorely ‚Äî Troubleshooting & Error Log

This document records common issues encountered during the development of **Scorely** and explains **why they occur** and **how they were resolved**.
The goal is to help developers debug iExec TEE applications efficiently and avoid common misconceptions.

---

## üö® 1. Docker Error: `failed to resolve reference` / `TLS handshake timeout`

**Symptom**
`iapp test` or `iapp deploy` fails during the Docker image pull stage (Step 1/6).

**Cause**
Temporary network issues or a stalled Docker daemon while pulling base images from Docker Hub.

**Resolution**

* Verify internet connectivity.
* Restart Docker Desktop / Docker daemon.
* Manually test the pull:

  ```bash
  docker pull python:3.13.3-alpine3.21
  ```

---

## üö® 2. `Failed to transform your app into a TEE app: Internal error`

**Symptom**
Deployment fails during the TEE transformation phase.

**Cause**

* Unsupported or incompatible base image in the `Dockerfile`.
* Mismatch between `iexec.json` and the expected iApp project structure.
* Corrupted local build cache.

TEE transformation is sensitive to the container runtime and entrypoint configuration.

**Resolution**

* Revert to a known-compatible iApp base image.
* Ensure `iexec.json` matches the project layout generated by the `iapp` CLI. 
* Redeploy:

  ```bash
   iapp deploy
  ```

---

## üö® 3. Task status: `INITIALIZE_FAILED` (TEE Enclave)

**Symptom**
The task fails almost immediately after being scheduled, with status `INITIALIZE_FAILED`.

**Cause**
The TEE enclave failed to initialize **before user code execution**.
This indicates that the deployed iApp configuration is incompatible with the available TEE workers.

Common reasons include:

* Unsupported runtime or container configuration
* Invalid enclave metadata
* Deployment-time resource constraints not supported by the target network

**Resolution**

* Redeploy the iApp using a configuration compatible with the target network‚Äôs TEE workers.
* Confirm the app was deployed as a TEE app and includes valid enclave metadata.
* Verify app details:

  ```bash
  iexec app show <APP_ADDRESS>
  ```

> **Note**: Enclave initialization failures cannot be fixed by changing runtime execution parameters alone.

---

## üö® 4. Execution hangs at `REQUEST_TO_PROCESS_PROTECTED_DATA`

**Symptom**
The frontend submits the execution request, but the task remains pending and never progresses.

**Cause**
The request was accepted, but no compatible workerpool picked up the task.
On test networks, this can occur due to:

* Limited worker availability
* Implicit matchmaking selecting an inactive or incompatible workerpool

**Resolution**

* Explicitly specify a known TEE-capable workerpool address.
* Ensure execution pricing constraints match existing marketplace orders.

---

## üö® 5. `TypeError: dataProtector.protectData is not a function`

**Symptom**
The frontend crashes during the data protection step.

**Cause**
Incorrect initialization or usage of the `@iexec/dataprotector` SDK.

**Resolution**
Initialize and use the SDK correctly:

```ts
const dp = new IExecDataProtector(provider);
await dp.core.protectData(...);
```

---

## üö® 6. `result.json` not found in enclave output

**Symptom**
The task completes successfully, but the frontend cannot find `result.json`.

**Cause**

* The application did not write output to `/iexec_out/`.
* The expected output path does not match the runtime configuration.

**Resolution**

* Ensure the app writes results to:

  ```python
  /iexec_out/result.json
  ```
* Verify output path configuration if used by the runtime.

---

## üö® 7. Task marked `COMPLETED` but frontend reports ‚ÄúTask not found‚Äù

**Symptom**
CLI reports task completion, but the frontend cannot retrieve results.

**Cause**
Network configuration mismatch between frontend and CLI tools, often due to incorrect or manually edited chain configuration files.

**Resolution**

* Verify that `chain.json` and `iapp.config.json` are set to the same network.
* Ensure the frontend provider is connected to the correct chain.

---

## üö® 8. Lost Task ID after page refresh

**Symptom**
Users lose execution progress when the page is refreshed during a long-running task.

**Cause**
The task identifier is held only in memory and not persisted.

**Resolution**

* Capture the `taskId` during execution status updates.
* Persist it (e.g., `localStorage`) to allow session recovery.

---

## üõ†Ô∏è Useful Debugging Commands

When working inside the `Scorely/IAPP` directory, the chain configuration is automatically inferred.

### Check Deal Status

Verify whether a request was successfully matched:

```bash
iexec deal show <DEAL_ID>
```

### Deep Task Debugging

Inspect off-chain status and execution history:

```bash
iexec task debug <TASK_ID>
```

### Task Summary

Quickly check task state and result metadata:

```bash
iexec task show <TASK_ID>
```

---

## üìå Common Misconceptions

* Worker selection and execution parameters **cannot fix enclave initialization failures**
* TEE issues often originate from **deployment-time configuration**, not runtime logic
* Testnet environments may have limited or unstable worker availability

Understanding these distinctions significantly reduces debugging time.

---

*This document reflects real issues encountered during development and is intended as a practical reference for building confidential applications on iExec.*

---
